<!DOCTYPE html>
<html>
<head>
<title>Admin Dashboard</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

body{
background:linear-gradient(to right,#4e73df,#1cc88a);
padding:40px;
font-family:Times New Roman;
}

.dashboard{
background:white;
padding:30px;
border-radius:18px;
box-shadow:0 0 30px rgba(0,0,0,0.3);
max-width:1000px;
margin:auto;
}

</style>

</head>

<body>

<div class="dashboard">

<h3 class="text-center">🏦 Cooperative Admin Panel</h3>

<h5 id="welcome"></h5>

<div class="row text-center mt-4">

<div class="col-md-3">
<div class="card p-3">
Members
<h4 id="members">0</h4>
</div>
</div>

<div class="col-md-3">
<div class="card p-3">
Savings
<h4 id="savings">0</h4>
</div>
</div>

<div class="col-md-3">
<div class="card p-3">
Loans
<h4 id="loans">0</h4>
</div>
</div>

<div class="col-md-3">
<div class="card p-3">
Penalty
<h4 id="penalty">0</h4>
</div>
</div>

</div>

<canvas id="chart" class="mt-4"></canvas>

<button class="btn btn-danger w-100 mt-4"
onclick="logout()">Logout</button>

</div>

<script>

/* Security Session Check */

let user=JSON.parse(localStorage.getItem("loggedIn"));

if(!user){
window.location.href="index.html";
}

document.getElementById("welcome").innerText=
"Welcome Admin " + user.name;

/* Financial Engine */

let accounts=JSON.parse(localStorage.getItem("accounts")||"[]");

let members=accounts.length;

let savings=members*1000;
let loans=members*500;
let penalty=savings*0.02;

/* Display */

document.getElementById("members").innerText=members;
document.getElementById("savings").innerText=savings+" ETB";
document.getElementById("loans").innerText=loans+" ETB";
document.getElementById("penalty").innerText=penalty.toFixed(2)+" ETB";

/* Chart */

new Chart(document.getElementById("chart"),{
type:"bar",
data:{
labels:["Members","Savings","Loans","Penalty"],
datasets:[{
label:"Cooperative Finance Analytics",
data:[members,savings,loans,penalty]
}]
}
});

/* Logout */

function logout(){
localStorage.removeItem("loggedIn");
window.location.href="index.html";
}

</script>

</body>
</html>